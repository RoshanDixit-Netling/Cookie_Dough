<!-- section -->
<div class="section our-locations after-gradient mb-0">
  <div class="container">
    <h3 class="h4 text-center">{{ section.settings.section_title }}</h3>
    <div class="map">
      <!-- Image Map Generated by http://www.image-map.net/ -->
      <img src="{{ section.settings.map_image | image_url }}" usemap="#image-map" />
      <map name="image-map">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
          {%- when 'map_pin' -%}
            {%- assign map_id = block.settings.store_name | downcase | replace: ' ', '-' | replace: ',', ''  -%}
            <area alt="pin1" class="pin" onmouseenter="showModal('{{ map_id }}')" onclick="showModal('{{  map_id }}')" coords="{{ block.settings.coords }}" shape="poly" />
          {%- endcase -%}
        {%- endfor -%}
      </map>
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'map_pin' -%}
          {%- assign map_id = block.settings.store_name | downcase | replace: ' ', '-' | replace: ',', ''  -%}
          <div class="map-popup" id="{{ map_id }}">
            <span class="icon">&times;</span>
            <p>{{ block.settings.store_name }}</p>
            <p class="place-name">{{ block.settings.place_name }}</p>
          </div>
          {%- endcase -%}
        {%- endfor -%}
    </div>
  </div>
</div>
<!-- /section -->
{% schema %}
{
  "name": "Stores Map",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "label": "Section Title",
      "id": "section_title",
      "default": "International Stores"
    },
    {
      "type": "image_picker",
      "label": "Map Image",
      "id": "map_image"
    }
  ],
  "blocks": [
    {
      "type": "map_pin",
      "name": "Map Pin",
      "settings": [
        {
          "type": "text",
          "label": "Store Name",
          "id": "store_name"
        },
        {
          "type": "text",
          "label": "Place Name",
          "id": "place_name"
        },
        {
          "type": "textarea",
          "label": "Coords",
          "id": "coords",
          "info": "Please DO NOT EDIT THIS it will break the map"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Stores Map"
    }
  ]
}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}